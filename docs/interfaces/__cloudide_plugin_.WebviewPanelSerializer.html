<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>WebviewPanelSerializer | @cloudide/plugin</title><meta name="description" content="Documentation for @cloudide/plugin"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@cloudide/plugin</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../index.html">@cloudide/plugin</a></li><li><a href="../modules/__cloudide_plugin_.html">&quot;@cloudide/plugin&quot;</a></li><li><a href="__cloudide_plugin_.WebviewPanelSerializer.html">WebviewPanelSerializer</a></li></ul><h1>Interface WebviewPanelSerializer&lt;T&gt; </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>Restore webview panels that have been persisted when vscode shuts down.</p>
</div><div><p>There are two types of webview persistence:</p>
<ul>
<li>Persistence within a session.</li>
<li>Persistence across sessions (across restarts of Theia).</li>
</ul>
<p>A <code>WebviewPanelSerializer</code> is only required for the second case: persisting a webview across sessions.</p>
<p>Persistence within a session allows a webview to save its state when it becomes hidden
and restore its content from this state when it becomes visible again. It is powered entirely
by the webview content itself. To save off a persisted state, call <code>acquireVsCodeApi().setState()</code> with
any json serializable object. To restore the state again, call <code>getState()</code></p>
<pre><code class="language-js"><span class="hl-5">// Within the webview</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">vscode</span><span class="hl-1"> = </span><span class="hl-2">acquireVsCodeApi</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// Get existing state</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">oldState</span><span class="hl-1"> = </span><span class="hl-0">vscode</span><span class="hl-1">.</span><span class="hl-2">getState</span><span class="hl-1">() || { </span><span class="hl-0">value:</span><span class="hl-1"> </span><span class="hl-7">0</span><span class="hl-1"> };</span><br/><br/><span class="hl-5">// Update state</span><br/><span class="hl-2">setState</span><span class="hl-1">({ </span><span class="hl-0">value:</span><span class="hl-1"> </span><span class="hl-0">oldState</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1"> + </span><span class="hl-7">1</span><span class="hl-1"> })</span>
</code></pre>
<p>A <code>WebviewPanelSerializer</code> extends this persistence across restarts of Theia. When the editor is shutdown,
Theia will save off the state from <code>setState</code> of all webviews that have a serializer. When the
webview first becomes visible after the restart, this state is passed to <code>deserializeWebviewPanel</code>.
The extension can then restore the old <code>WebviewPanel</code> from this state.</p>
</div></div></section><section class="tsd-panel tsd-type-parameters"><h3>Type Parameters</h3><ul class="tsd-type-parameters"><li><h4>T = <span class="tsd-signature-type">unknown</span></h4></li></ul></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">WebviewPanelSerializer</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-interface"><a href="__cloudide_plugin_.WebviewPanelSerializer.html#deserializeWebviewPanel" class="tsd-kind-icon">deserialize<wbr/>Webview<wbr/>Panel</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="deserializeWebviewPanel" class="tsd-anchor"></a><h3 class="tsd-anchor-link">deserialize<wbr/>Webview<wbr/>Panel<a href="#deserializeWebviewPanel" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">deserialize<wbr/>Webview<wbr/>Panel<span class="tsd-signature-symbol">(</span>webviewPanel<span class="tsd-signature-symbol">: </span><a href="__cloudide_plugin_.WebviewPanel.html" class="tsd-signature-type" data-tsd-kind="Interface">WebviewPanel</a>, state<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type" data-tsd-kind="Type parameter">T</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">PromiseLike</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/kpge/cloudide-plugin-api/blob/951c566/index.d.ts#L3679">index.d.ts:3679</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Restore a webview panel from its serialized <code>state</code>.</p>
</div><div><p>Called when a serialized webview first becomes visible.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>webviewPanel: <a href="__cloudide_plugin_.WebviewPanel.html" class="tsd-signature-type" data-tsd-kind="Interface">WebviewPanel</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Webview panel to restore. The serializer should take ownership of this panel. The
serializer must restore the webview&#39;s <code>.html</code> and hook up all webview events.</p>
</div></div></li><li><h5>state: <span class="tsd-signature-type" data-tsd-kind="Type parameter">T</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Persisted state from the webview content.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">PromiseLike</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><div><p>PromiseLike indicating that the webview has been fully restored.</p>
</div></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../index.html">Exports</a></li><li class="current tsd-kind-namespace"><a href="../modules/__cloudide_plugin_.html">&quot;@cloudide/plugin&quot;</a><ul><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.authentication.html">authentication</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.cloudideApiService.html">cloudide<wbr/>Api<wbr/>Service</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.commands.html">commands</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.comments.html">comments</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.debug.html">debug</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.env.html">env</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.extensions.html">extensions</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.languages.html">languages</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.log.html">log</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.plugins.html">plugins</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.scm.html">scm</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.tasks.html">tasks</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.window.html">window</a></li><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/__cloudide_plugin_.workspace.html">workspace</a></li></ul></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface tsd-parent-kind-namespace tsd-has-type-parameter"><a href="__cloudide_plugin_.WebviewPanelSerializer.html" class="tsd-kind-icon">Webview<wbr/>Panel<wbr/>Serializer</a><ul><li class="tsd-kind-method tsd-parent-kind-interface"><a href="__cloudide_plugin_.WebviewPanelSerializer.html#deserializeWebviewPanel" class="tsd-kind-icon">deserialize<wbr/>Webview<wbr/>Panel</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>